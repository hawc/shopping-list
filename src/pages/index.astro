---
import Layout from '../layouts/Layout.astro';

import ListItem from '../components/ListItem.astro';

import { xata } from '../utils/xata';
import List from '../components/List.astro';

const items = await xata.db.items
  .filter({ 'list.user': null, 'list.status': 'ACTIVE' })
  .select([
    'name',
    'status',
    'amount',
    'comment',
    'unit.name',
    'product.name',
    'product.productType',
    'list.name',
  ])
  .getAll();
export type Item = (typeof items)[0];
---

<Layout title="Welcome to Astro.">
  <List>
    {items.map((item) => <ListItem item={item} />)}
    <ListItem />
  </List>
</Layout>
